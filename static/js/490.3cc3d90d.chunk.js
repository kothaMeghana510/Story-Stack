"use strict";(self.webpackChunkstory_stack=self.webpackChunkstory_stack||[]).push([[490],{138:(e,n,s)=>{s.d(n,{A:()=>i});var o=s(475),t=s(579);const a=function(){return(0,t.jsx)("div",{className:"logo",children:(0,t.jsx)("h1",{children:"Story Stack \ud83d\udcd6"})})};const i=function(){return(0,t.jsx)("div",{children:(0,t.jsxs)("nav",{className:"nav",children:[(0,t.jsx)(a,{}),(0,t.jsxs)("ul",{className:"links",children:[(0,t.jsx)("li",{children:(0,t.jsx)(o.k2,{to:"/",className:"nav-link",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)(o.k2,{to:"/explore",className:"nav-link",children:"Explore"})}),(0,t.jsx)("li",{children:(0,t.jsx)(o.k2,{to:"/likedbooks",className:"nav-link",children:"Favorites"})})]})]})})}},490:(e,n,s)=>{s.r(n),s.d(n,{default:()=>B});var o=s(555),t=s(43),a=s(579);const i={display:"flex",alignItems:"center",gap:"1.5em"},l={display:"flex",gap:window.innerWidth<600?"0.4em":"1em"},c={lineHeight:"0.1",margin:"1",color:"gold",fontSize:"1.2em",fontWeight:"bold"};function r(e){let{maxRange:n=5,onSetRating:s,defaultRating:o=0}=e;const[r,d]=(0,t.useState)(o),[u,h]=(0,t.useState)(0);return(0,a.jsxs)("div",{style:i,children:[(0,a.jsx)("div",{style:l,children:Array.from({length:n},((e,n)=>(0,a.jsx)(m,{onRate:()=>function(e){d(e),s(e)}(n+1),full:u?u>=n+1:r>=n+1,onHoverIn:()=>h(n+1),onHoverOut:()=>h(0)},n)))}),(0,a.jsx)("p",{style:c,children:u||r||""})]})}const d={width:"1em",height:"1em",color:"#F39C12",display:"block",cursor:"pointer",border:"#F39C12"},u={color:"#F39C12"},h={color:"#fff"};function m(e){let{onRate:n,full:s,onHoverIn:t,onHoverOut:i}=e;return(0,a.jsx)("span",{style:(0,o.A)((0,o.A)({},d),s?u:h),onClick:n,onMouseEnter:t,onMouseLeave:i,children:(0,a.jsx)("i",{className:"fa-solid fa-star"})})}const f=function(){return(0,a.jsx)("div",{className:"load",children:(0,a.jsx)("p",{className:"loader"})})};function v(e){let{book:n,handleSelectBook:s}=e;const{title:o,authors:t,imageLinks:i}=n.volumeInfo||"";return(0,a.jsx)("div",{onClick:()=>s(n.id),children:(0,a.jsx)("ul",{children:(0,a.jsxs)("li",{className:"list-element",children:[(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("img",{src:null===i||void 0===i?void 0:i.thumbnail,className:"readBook-Image"})}),(0,a.jsxs)("div",{className:"readBook-details",children:[(0,a.jsx)("h2",{className:"title",children:o}),(0,a.jsx)("p",{className:"read-author author",children:t})]})]})})})}const x=function(e){let{books:n,handleSelectBook:s}=e;return console.log(n),(0,a.jsx)("div",{children:n.map((e=>(0,a.jsx)(v,{book:e,handleSelectBook:s})))})};var j=s(11);const k="AIzaSyCKgfDiPLUMSz9LEhlUVE3VyJ4W7yIcfRI";const g=function(e){var n;let{selectedID:s,handleCloseButton:o,readBook:i,handleSelectBook:l}=e;const{handleAddReadBook:c}=(0,j.w)(),[d,u]=(0,t.useState)({}),[h,m]=(0,t.useState)(!1),[v,g]=(0,t.useState)(""),[p,y]=(0,t.useState)([]),[S,w]=(0,t.useState)(!1),b=(null!==i&&void 0!==i?i:[]).map((e=>e.id)).includes(s),N=Array.isArray(i)?null===(n=i.find((e=>String(e.id)===String(s))))||void 0===n?void 0:n.userRating:void 0,{title:I,authors:B,imageLinks:A,categories:C,language:E,publishedDate:F,description:L}=d.volumeInfo||{};return(0,t.useEffect)((()=>{w(!1)}),[s]),(0,t.useEffect)((function(){function e(e){"Escape"===e.code&&o()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[o]),(0,t.useEffect)((function(){if(I)return document.title="Book | ".concat(I),function(){document.title="Story Stack"}}),[I]),(0,t.useEffect)((function(){!async function(){m(!0);const e=await fetch("https://www.googleapis.com/books/v1/volumes/".concat(s,"?key=").concat(k)),n=await e.json();u(n)}(),m(!1)}),[s]),(0,t.useEffect)((function(){!async function(){var e;if(!B||0===B.length)return;const n=B[0],s=await fetch("https://www.googleapis.com/books/v1/volumes?q=inauthor:".concat(n,"&&key=").concat(k)),o=(null===(e=(await s.json()).items)||void 0===e?void 0:e.filter((e=>{var s,o;return null===(s=e.volumeInfo)||void 0===s||null===(o=s.authors)||void 0===o?void 0:o.some((e=>e.replace(/\s+/g," ").trim().toLowerCase()===n.replace(/\s+/g," ").trim().toLowerCase()))})))||[];if(0===o.length)return"no books were found";y(o)}()}),[B]),(0,a.jsx)("div",{className:"bookItem selectedBook ".concat(s?"show":""),children:h?(0,a.jsx)(f,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{onClick:o,children:(0,a.jsx)("i",{className:"fa-solid fa-square-xmark icon"})}),(0,a.jsxs)("header",{children:[(0,a.jsx)("img",{src:null===A||void 0===A?void 0:A.thumbnail,alt:"".concat(I," Image"),className:"selected-Image"}),(0,a.jsxs)("div",{className:"selected-header",children:[(0,a.jsxs)("h2",{children:[" ",I]}),(0,a.jsxs)("p",{className:"author",children:[" \u2712\ufe0f ",null===B||void 0===B?void 0:B.join(", ")]}),C&&C.map(((e,n)=>(0,a.jsx)("span",{className:"categories",children:e},n))),E&&(0,a.jsxs)("p",{children:["Language - ",E]}),F&&(0,a.jsxs)("p",{children:["Published : ",(0,a.jsx)("em",{children:F})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"Ratings",children:b?(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["You already rated this book: ",N]}),(0,a.jsx)("p",{children:"Book added to your Library."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{maxRange:10,onSetRating:g,defaultRating:0}),v>0&&(0,a.jsx)("button",{onClick:function(){c({id:s,title:I,authors:B,imageLinks:A,categories:C,language:E,userRating:v})},children:"ADD BOOK"})]})}),(0,a.jsxs)("div",{className:"more-books",children:[(0,a.jsx)("p",{children:"want to see more books from this writer?"}),(0,a.jsx)("button",{onClick:function(){w((e=>!e))},children:"More Books"}),S&&(0,a.jsx)(x,{books:p,handleSelectBook:l})]})]}),(0,a.jsx)("div",{className:"description",dangerouslySetInnerHTML:{__html:L}}),(0,a.jsx)("section",{})]})})};const p=function(e){let{query:n,setQuery:s}=e;const o=(0,t.useRef)(null);return(0,t.useEffect)((function(){function e(e){document.activeElement!==o.current&&"Enter"===e.code&&(o.current.focus(),s(""))}return document.addEventListener("keydown",e),()=>document.addEventListener("keydown",e)}),[s]),(0,a.jsx)("div",{className:"search",children:(0,a.jsx)("input",{type:"text",placeholder:"search for books",value:n,onChange:e=>s(e.target.value),ref:o})})};var y=s(201);function S(e){var n,s;let{book:o,handleSelectBook:t,handleAddToFavorites:i,addToFavorites:l}=e;const c=o.volumeInfo,r=null===(n=c.imageLinks)||void 0===n?void 0:n.thumbnail,d=Array.isArray(l)&&l.some((e=>e.id===o.id));return(0,a.jsxs)("div",{className:"bookItem",onClick:()=>t(o.id),children:[(0,a.jsxs)("div",{className:"imageContainer",children:[(0,a.jsx)("img",{src:r,alt:"".concat(c.title," Image"),className:"bookImages"}),(0,a.jsx)("span",{className:d?"iconColor":"favourites",onClick:e=>{e.stopPropagation(),i(o)},children:(0,a.jsx)("i",{class:"fa-solid fa-thumbs-up"})})]}),(0,a.jsxs)("div",{className:"details",children:[(0,a.jsxs)("h2",{children:["\ud83d\udcd8",c.title]}),(0,a.jsx)("p",{className:"author",children:(0,a.jsxs)("em",{children:["\u2712\ufe0f ",null===(s=c.authors)||void 0===s?void 0:s.join(", ")]})})]})]})}const w=function(e){let{books:n,selectedID:s,handleSelectBook:o,handleAddToFavorites:t}=e;const{addToFavorites:i}=(0,y.e)();return(0,a.jsx)("div",{className:"slider",children:(0,a.jsx)("div",{className:"booksContainer ".concat(s?"shrink":""," "),children:n.map((e=>(0,a.jsx)(S,{book:e,handleSelectBook:o,handleAddToFavorites:t,addToFavorites:i},e.id)))})})};const b=function(e){let{message:n}=e;return(0,a.jsx)("div",{className:"errorMessage",children:(0,a.jsx)("p",{children:n})})};const N=function(e){let{children:n}=e;return(0,a.jsx)("main",{children:n})};var I=s(138);const B=function(){const[e,n]=(0,t.useState)([]),[s,o]=(0,t.useState)(!1),[i,l]=(0,t.useState)(""),[c,r]=(0,t.useState)(""),[d,u]=(0,t.useState)(null),[h,m]=(0,t.useState)((function(){const e=localStorage.getItem("ReadBook");try{return e?JSON.parse(e):[]}catch(n){return[]}})),{handleToggleFavorite:v,handleAddToFavorites:x}=(0,y.e)();function j(e){u((n=>e===n?null:e))}function k(){u(null)}return(0,t.useEffect)((function(){const e=new AbortController;return!c.length<3&&(l(""),n([])),k(),async function(){try{o(!0),l("");const s=await fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(c,"&&key=").concat("AIzaSyCKgfDiPLUMSz9LEhlUVE3VyJ4W7yIcfRI"),{signal:e.signal});if(!s.ok)throw new b("\u2639\ufe0f \u201cOops! Something went wrong!!!");const t=await s.json();if("False"===t.Response)throw new b("Book not Found");if(!t.items||0===t.totalItems)throw new b("\ud83d\udcda Book not found.");n(t.items),o(!1),l("")}catch(s){"AbortError"!==s.name&&l(s.message)}finally{o(!1)}}(),function(){e.abort()}}),[c]),(0,a.jsxs)("div",{children:[(0,a.jsx)(I.A,{}),(0,a.jsx)(p,{query:c,setQuery:r,handleToggleFavorite:v}),(0,a.jsxs)(N,{children:[(0,a.jsxs)("div",{children:[s&&(0,a.jsx)(f,{}),!s&&!i&&(0,a.jsx)(w,{books:e,selectedID:d,handleSelectBook:j,handleAddToFavorites:x}),i&&(0,a.jsx)(b,{message:i})]}),(0,a.jsx)("div",{children:d?(0,a.jsx)(g,{selectedID:d,setSelectedID:u,handleCloseButton:k,handleAddReadBook:function(e){m((n=>[...Array.isArray(n)?n:[],e]))},readBook:h,handleSelectBook:j}):""})]})]})}}}]);
//# sourceMappingURL=490.3cc3d90d.chunk.js.map